{% extends "base_generic.html" %}
{% load i18n %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}<title> {{ guidepost.title }}</title>{% endblock %}

{% block content %}

<style>
figure {
    margin: 1.5em;
}

.image-style-side {
    float: right;
}

.image-style-align-right {
    float: right;
}

.image-style-align-left {
    float: left;
}

.image-style-align-center {
    margin-left: auto;
    margin-right: auto;
    display: block;
}
</style>

<div class="row">
    <div class="col-md-9">
        <h1 class="text-center">{{ guidepost.title }}
            {% if is_author %}
                <a class="btn btn-primary mx-2 mt-2" href="{% url 'guide-update' guidepost.slug %}" role="button">{% trans "Update Post" %}</a>
                <a class="btn btn-danger mx-2 mt-2" href="{% url 'guide-delete' guidepost.slug %}" role="button">{% trans "Delete Post" %}</a>
            {% endif %}
        </h1>

        <div class="container bg-light m-4 p-3">
            {{ guidepost.short_description }}
        </div>

        <div class="container">
            {{ guidepost.guide_content|safe }}
        </div>

        <div class="row">
            <div class="col-md-12 my-md-5">
                {% if next_posts %}
                    <div class="container">
                        <h3>{% trans "Next guide posts:" %}</h3>
                        {% include 'guide_post_snippet.html' with list=next_posts %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="col-md-3 mt-md-5">
    {% if country_post %}
        <div class="container">
            <h3>{% trans "See these interesting countries:" %}</h3>
            {% include 'country_guide_snippet.html' with list=country_post small_list=True vertical_list=True %}
        </div>
    {% elif blog_post %}
        <div class="container">
            <h3>{% trans "See these blog post:" %}</h3>
            {% include 'exchangeblog/post_list_snippet.html' with list=blog_post deck=True %}
        </div>
    {% endif %}
    </div>
</div>

{% endblock %}

{% block body-meta %}
<script>
$( document ).ready(function() {
    var figureClasses = $('figure').className;
    $('figure').each(function( index ) {
        var imageChild = $(this).find('img');
        var figureWidthPercentage = $(this).css('width');
        imageChild.width(figureWidthPercentage);
        imageChild.addClass('img-responsive');
        imageChild.addClass($(this).attr('class'));
    });


});
</script>
{% endblock %}